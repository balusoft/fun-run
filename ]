//
//  BullsAndCows.cpp
//  CPP Test9
//
//  Created by Balaji Cherukuri on 2/16/16.
//  Copyright Â© 2016 FooBar. All rights reserved.
//

#include "BullsAndCows.hpp"

#include <string>
#include <iostream>
#include <sstream>
#include <set>

class Solution {
public:
  std::string getHint(const std::string& secret, const std::string& guess) {
    std::set<size_t> bulls;
    std::set<size_t> cows;
    for (size_t idx=0; idx<guess.size(); ++idx) {
      if (prev.find(guess[idx]) == prev.end()) {
        prev[guess[idx]] = 0;
      }
      if (guess[idx] == secret[idx]) {
        ++bull;
        prev[guess[idx]] = idx+1;
      } else {
        size_t cidx = secret.find(guess[idx], prev[guess[idx]]);
        if (cidx != std::string::npos) {
          ++cow;
          prev[guess[idx]] = cidx+1;
        }
      }
    }
    std::ostringstream ostr;
    ostr << bull << "A" << cow << "B";
    return ostr.str();
  }
};

namespace BullsAndCows {
void test() {
  Solution s;
  std::cout << "hint: " << s.getHint("1807", "7810") << "\n";
  std::cout << "hint: " << s.getHint("1123", "0111") << "\n";
}
};
